var Pinokio;(()=>{var t={467:t=>{t.exports=class{constructor(t,r,e,...s){let n=new FormData;n.append("drive",t),n.append("path",r),n.append("method",e);let i=[];for(let t of s){let r,e=this.type(t);r=["File","Blob","Uint8Array","ArrayBuffer"].includes(e)?"Blob":e,i.push(r)}n.append("types",this.serialize(i));for(let t=0;t<s.length;t++){let r=this.serialize(s[t]);console.log("serialized",t,r),n.append(`arg${t}`,r)}return n}type(t){return"object"==typeof t?t.constructor.name:typeof t}serialize(t){let r=this.type(t);return"File"===r||"Blob"===r?t:"Uint8Array"===r||"ArrayBuffer"===r?new Blob([t]):"Array"===r||"Object"===r?JSON.stringify(t):"function"===r?t.toString():t}}},879:(t,r,e)=>{const s=e(467);t.exports=class{constructor(t,r,e){this.uri=t+"/pinokio/fs",this.drive=r,this.path=e}async run(t,r){let e=new s(this.drive,this.path,t,...r);console.log("this.uri",this.uri);let n=await fetch(this.uri,{method:"POST",body:e}).then((t=>t.json()));if(n.error)throw new Error(n.error);return n.result}url(t){return`${this.uri}?drive=${this.drive}&path=${this.path}/${t}`}clone(...t){return this.run("clone",t)}pull(...t){return this.run("pull",t)}appendFile(...t){return this.run("appendFile",t)}readFile(...t){return this.run("readFile",t)}writeFile(...t){return this.run("writeFile",t)}access(...t){return this.run("access",t)}cp(...t){return this.run("cp",t)}copyFile(...t){return this.run("copyFile",t)}exists(...t){return this.run("exists",t)}link(...t){return this.run("link",t)}lstat(...t){return this.run("lstat",t)}mkdir(...t){return this.run("mkdir",t)}readdir(...t){return this.run("readdir",t)}rmdir(...t){return this.run("rmdir",t)}readlink(...t){return this.run("readlink",t)}rm(...t){return this.run("rm",t)}rename(...t){return this.run("rename",t)}stat(...t){return this.run("stat",t)}statfs(...t){return this.run("statfs",t)}symlink(...t){return this.run("symlink",t)}truncate(...t){return this.run("truncate",t)}unlink(...t){return this.run("unlink",t)}utimes(...t){return this.run("utimes",t)}}},10:(t,r,e)=>{const s=e(879),n=e(635);t.exports=class{constructor(t){if(this.url={},t)t.http&&(this.url.http=t.http),t.ws&&(this.url.ws=t.ws);else{let t="https:"===location.protocol?"wss":"ws";this.url.ws=`${t}://${location.host}`,this.url.http=`${location.protocol}//${location.host}`}}fs(t,r){return new s(this.url.http,t,r)}rpc(){return new n(this.url.ws)}port(){return fetch(this.url.http+"/pinokio/port").then((t=>t.json())).then((t=>t.result))}}},635:(t,r,e)=>{const{WebSocket:s}=e(395);t.exports=class{constructor(t){this.url=t}async status(t){return await new Promise(((r,e)=>{this.run({status:!0,...t},(t=>{r(t.data),this.ws.close()}))}))}stop(t){this.run({stop:!0,...t})}run(t,r){return new Promise(((e,n)=>{this.ws?this.ws.send(JSON.stringify(t)):(this.ws=new s(this.url),this.ws.addEventListener("open",(()=>{this.ws.send(JSON.stringify(t))})),this.ws.addEventListener("message",(t=>{if(r){const e=JSON.parse(t.data);r(e)}})),this.ws.addEventListener("close",(()=>{console.log("Disconnected from WebSocket endpoint",{error:this.error,result:this.result}),delete this.ws,e()})))}))}respond(t){if(!this.ws)throw new Error("socket not connected");this.ws.send(JSON.stringify(t))}}},395:(t,r,e)=>{"use strict";e.r(r),e.d(r,{WebSocket:()=>s});const s="undefined"!=typeof WebSocket?WebSocket:null}},r={};function e(s){var n=r[s];if(void 0!==n)return n.exports;var i=r[s]={exports:{}};return t[s](i,i.exports,e),i.exports}e.d=(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),e.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s=e(10);Pinokio=s})();